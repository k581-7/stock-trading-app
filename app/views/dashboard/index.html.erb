<div class="container trader-dashboard-bg">

  <h1 class="mb-4">Trader Dashboard</h1>

  <div class="row g-4 text-center">
    <!-- Available Balance -->
    <div class="col-md-4">
      <div class="card bg-dark text-light shadow-sm border-0">
        <div class="card-body">
          <h6 class="text-secondary">Available Balance</h6>
          <h2 class="fw-bold text-info"><%= number_to_currency(@wallet.balance) %></h2>
          <p class="text-secondary mb-0">Ready to trade</p>
        </div>
      </div>
    </div>

    <!-- Total Deposits -->
    <div class="col-md-4">
      <div class="card bg-dark text-light shadow-sm border-0">
        <div class="card-body">
          <h6 class="text-secondary">Total Deposits</h6>
          <h2 class="fw-bold text-primary"><%= number_to_currency(@wallet_logs.where(transaction_type: 'deposit').sum(:amount)) %></h2>
          <p class="text-secondary mb-0">All Time</p>
        </div>
      </div>
    </div>

    <!-- Trading Volume -->
    <div class="col-md-4">
      <div class="card bg-dark text-light shadow-sm border-0">
        <div class="card-body">
          <h6 class="text-secondary">Trading Volume</h6>
          <h2 class="fw-bold text-info"><%= number_to_currency(@trade_history.sum(:amount)) %></h2>
          <p class="text-secondary mb-0">Total Traded</p>
        </div>
      </div>
    </div>
  </div>
<br>

<!-- Market Overview -->
<div class="card mb-4 bg-dark text-light border-0 shadow-sm">
  <div class="card-header bg-secondary text-white">Market Overview</div>
  <div class="card-body">
    <div class="row row-cols-2 row-cols-md-3 g-3">
      <% @stocks.each do |stock| %>
        <div class="col">
          <div class="border rounded p-3 text-center bg-dark text-light shadow-sm">
            <h6 class="mb-1 fw-bold text-info"><%= stock.symbol %></h6>
            <p class="mb-0 text-light"><%= stock.name %></p>
            <p class="mb-0 fw-bold">
              <%= number_to_currency(stock.current_price) %>
              <span class="<%= stock.price_change.to_f >= 0 ? 'text-success' : 'text-danger' %>">
                (<%= stock.price_change.to_f >= 0 ? '+' : '' %><%= number_to_percentage(stock.price_change, precision: 2) %>)
              </span>
            </p>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

  <!-- Quick Trading Actions -->
  <div class="card mb-4 shadow-sm bg-dark text-light border-0">
    <div class="card-header bg-secondary text-white text-center">
      <h5 class="mb-0">Quick Trading Actions</h5>
    </div>
    <div class="card-body">
      <div class="row g-3 text-center">
        <!-- Buy Stocks -->
        <div class="col-md-3 col-6">
          <a href="<%= new_trade_path %>" class="btn btn-success w-100 py-3">
            <i class="bi bi-arrow-up-right-circle me-2"></i> Buy Stocks
          </a>
        </div>

        <!-- Sell Stocks -->
        <div class="col-md-3 col-6">
          <a href="<%= new_trade_path %>" class="btn btn-danger w-100 py-3">
            <i class="bi bi-arrow-down-right-circle me-2"></i> Sell Stocks
          </a>
        </div>

        <!-- My Portfolio -->
        <div class="col-md-3 col-6">
          <a href="<%= portfolios_path %>" class="btn btn-info w-100 py-3 text-white">
            <i class="bi bi-graph-up-arrow me-2"></i> My Portfolio
          </a>
        </div>

        <!-- My Wallet -->
        <div class="col-md-3 col-6">
          <a href="<%= wallet_path %>" class="btn btn-warning w-100 py-3 text-dark">
            <i class="bi bi-wallet2 me-2"></i> My Wallet
          </a>
        </div>
      </div>
    </div>
  </div>
</div>